// Prisma schema for Supabase PostgreSQL
// You must set your Supabase connection string in .env as DATABASE_URL

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = postgresql://postgres:KutXBP3Bu1C7FEjU5D@db.sluzesergikpahlxwxya.supabase.co:3434/postgres
  directurl = env("directurl)
}


model BlogPost {
  id          String   @id @default(uuid())
  title       String
  content     String
  tags        String[]
  slug        String
  published   Boolean  @default(false)
  created_at  DateTime @default(now())
  updated_at  DateTime?
}

model HeaderAnnouncement {
  id          String   @id @default(uuid())
  text        String
  enabled     Boolean  @default(false)
  created_at  DateTime @default(now())
  updated_at  DateTime?
}

model License {
  id              String   @id @default(uuid())
  license_key     String
  client_project_id String?
  status          String?
  max_domains     Int?
  expires_at      DateTime?
  created_at      DateTime @default(now())
  updated_at      DateTime?
}

model LicenseDomain {
  id          String   @id @default(uuid())
  license_id  String?
  domain      String
  first_seen  DateTime?
  last_seen   DateTime?
}

model LicenseLog {
  id          String   @id @default(uuid())
  license_id  String?
  domain      String
  created_at  DateTime @default(now())
  last_checked DateTime?
}

model LicenseEvent {
  id          String   @id @default(uuid())
  license_id  String?
  event_type  String
  domain      String?
  error_code  String?
  message     String?
  metadata    Json?
  created_at  DateTime @default(now())
}

model Project {
  id          String   @id @default(uuid())
  title       String
  short_description String?
  full_description String?
  image_url   String?
  demo_url    String?
  tech_stack  String[]
  type        String?
  featured    Boolean  @default(false)
  created_at  DateTime @default(now())
  updated_at  DateTime?
}

model Client {
  id          String   @id @default(uuid())
  business_name String?
  contact_email String
  status      String?
  user_id     String?
  created_at  DateTime @default(now())
  updated_at  DateTime?
}

model ClientProject {
  id          String   @id @default(uuid())
  client_id   String?
  project_id  String?
  license_key String?
  private_notes String?
  created_at  DateTime @default(now())
}

model ChatMessage {
  id          String   @id @default(uuid())
  sender_id   String?
  sender_email String
  sender_name String
  is_from_client Boolean?
  message     String
  project_id  String?
  license_id  String?
  status      String?
  read_at     DateTime?
  created_at  DateTime @default(now())
}

model Docs {
  id          String   @id @default(uuid())
  slug        String
  title       String?
  content     String
  category    String?
  is_public   Boolean? @default(true)
  order_index Int?
  created_at  DateTime @default(now())
  updated_at  DateTime?
}
